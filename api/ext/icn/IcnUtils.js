window.RQ=window.RQ||{},RQ.Utils=RQ.Utils||{},RQ.Utils.regexFormat="^/(.+)/(|i|g|ig|gi)$",RQ.Utils.isValidRegex=function(t){return-1!==t.search(new RegExp(RQ.Utils.regexFormat))},RQ.Utils.toRegex=function(t){var e;return this.isValidRegex(t)?(e=t.match(new RegExp(RQ.Utils.regexFormat)),new RegExp(e[1],e[2])):null},RQ.Utils.isValidUrl=function(t){return 0===t.search(/^http:|https:|ftp:|javascript:/)},RQ.Utils.getId=function(){return Date.now()},RQ.Utils.getCurrentTime=function(){return Date.now()},RQ.Utils.formatDate=function(t,e){const n=new Date(t);if(t&&"yyyy-mm-dd"===e){let t=n.getMonth()+1,e=n.getDate();return e=String(e).length<2?"0"+e:String(e),t=String(t).length<2?"0"+t:String(t),n.getFullYear()+"-"+t+"-"+e}},RQ.Utils.reloadPage=function(t){t=t||0,setTimeout((function(){window.location.reload()}),t)},RQ.Utils.submitEvent=function(t,e,n,r){n||(n=t+" "+e),RQ.ContentScriptMessageHandler.sendMessage({action:RQ.MESSAGE_HANDLER.ACTIONS.SUBMIT_EVENT,eventCategory:t,eventAction:e,eventLabel:n,eventValue:r})},RQ.Utils.submitAttr=function(t,e){const n={action:RQ.MESSAGE_HANDLER.ACTIONS.SUBMIT_ATTR,attr:t,value:e};RQ.ContentScriptMessageHandler.sendMessage(n)},RQ.Utils.removeLastPart=function(t,e){return-1===(t=t||"").indexOf(e)?t:((t=t.split(e)).length--,t.join(e))},RQ.Utils.setCookie=function(t,e,n){document.cookie=t+"="+e+"; path=/; max-age="+n},RQ.Utils.readCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},RQ.Utils.eraseCookie=function(t){RQ.Utils.setCookie(t,"",1)},RQ.Utils.extractUrlComponent=function(t,e){switch(window.dummyAnchor||(window.dummyAnchor=document.createElement("a")),window.dummyAnchor.href=t,e){case RQ.URL_COMPONENTS.URL:return t;case RQ.URL_COMPONENTS.PROTOCOL:return window.dummyAnchor.protocol;case RQ.URL_COMPONENTS.HOST:return window.dummyAnchor.host;case RQ.URL_COMPONENTS.PATH:return window.dummyAnchor.pathname;case RQ.URL_COMPONENTS.QUERY:return window.dummyAnchor.search;case RQ.URL_COMPONENTS.HASH:return window.dummyAnchor.hash}console.error("Invalid source key",t,e)},RQ.Utils.getQueryParamsMap=function(t){var e={};return t&&"?"!==t?("?"===t[0]&&(t=t.substr(1)),t.split("&").forEach((function(t){var n=t.split("=")[0],r=t.split("=")[1];e[n]=e[n]||[],e[n].push(r)})),e):e},RQ.Utils.convertQueryParamMapToString=function(t){var e=[];for(var n in t){(t[n]||[]).forEach((function(t){void 0===t?e.push(n):e.push(n+"="+t)}))}return e.join("&")},RQ.Utils.getUrlWithoutQueryParamsAndHash=function(t){return t.split("#")[0].split("?")[0]},RQ.Utils.addQueryParamToURL=function(t,e,n,r){let i=t,o=RQ.Utils.getUrlWithoutQueryParamsAndHash(t),a=RQ.Utils.extractUrlComponent(t,RQ.URL_COMPONENTS.HASH),s=RQ.Utils.extractUrlComponent(t,RQ.URL_COMPONENTS.QUERY),l=RQ.Utils.getQueryParamsMap(s);return l[e]=r?[]:l[e]||[],l[e].push(n),s=RQ.Utils.convertQueryParamMapToString(l),i=s?o+"?"+s:o,i+=a,i},RQ.Utils.addDelay=function(t){const e=Date.now();let n=null;do{n=Date.now()}while(n-e<t)},RQ.Utils.generateExecutionLogId=function(){return`executionLog_${Date.now()+Math.floor(1e6*Math.random())}`},RQ.Utils.jsonifyValidJSONString=t=>{if("string"!=typeof t)return t;try{return JSON.parse(t)}catch(t){}return t},RQ.Utils.convertSearchParamsToJSON=t=>{const e={};if(!t||"?"===t||-1===t.indexOf("?"))return e;const n=t.split("?")[1],r=Object.fromEntries(new URLSearchParams(n));for(paramName in r){const t=r[paramName];r[paramName]=RQ.Utils.jsonifyValidJSONString(t)}return r},RQ.Utils.traverseJsonByPath=(t,e)=>{if(!e)return;const n=e.split(".");try{for(i=0;i<n.length-1;i++)t=t[n[i]];return t[n[n.length-1]]}catch(t){}},RQ.Utils.setObjectValueAtPath=(t,e,n)=>{if("object"!=typeof t||Array.isArray(t)||null===t)return;if("string"!=typeof e)return;let r=t;const i=e.split("."),o=i.length;for(let t=0;t<o-1;t++){const e=i[t];r[e]||(r[e]={}),r=r[e]}r[i[o-1]]=n};